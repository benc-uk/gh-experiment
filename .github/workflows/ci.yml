# This is a basic workflow to help you get started with Actions

name: CI Test

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

permissions:
  contents: read
  issues: write
  
jobs:
  ci-build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - run: |
          echo "github.triggering_actor ${{ github.triggering_actor }}"
          echo "github.ref_name ${{ github.ref_name }}"
          echo "github.ref ${{ github.ref }}"
          echo "github.head_ref ${{ github.head_ref }}"
          echo "github.base_ref ${{ github.base_ref }}"
          echo "--------------"
          echo "committer.name: ${{ github.event.head_commit.committer.name }}"

      - name: Dump GitHub context
        env:
          DUMP: ${{ toJson(github.event) }}
        run: |
          echo "$DUMP"
        
      - name: Open New GitHub Issue
        if: github.ref == 'refs/heads/main'
        uses: dacbd/create-issue-action@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: Push direct to main!
          body: ðŸ’¥ Whoops! Looks like ${{ github.actor }} pushed directly to the main branch! I'm sure this was just a mistake ðŸ™ƒ
          labels: whoops
